<<<<<<<
# æ›´æ–°æ—¥å¿—







## [2025-01-16] ç½‘ç»œè®¿é—®ä¼˜åŒ–æ›´æ–°







### ðŸš€ æ–°åŠŸèƒ½







- **å¯é…ç½®APIç«¯ç‚¹**: æ”¯æŒé€šè¿‡çŽ¯å¢ƒå˜é‡è‡ªå®šä¹‰Gemini APIåŸºç¡€URL



- **è‡ªåŠ¨æ•…éšœè½¬ç§»**: ä¸»URLå¤±è´¥æ—¶è‡ªåŠ¨å°è¯•å¤‡ç”¨URLåˆ—è¡¨



- **ç½‘ç»œè¿žæŽ¥æµ‹è¯•**: æ·»åŠ äº†ç½‘ç»œè¿žæŽ¥æµ‹è¯•å·¥å…·



- **è¯¦ç»†æ—¥å¿—è®°å½•**: æ”¹è¿›äº†è¿žæŽ¥è¿‡ç¨‹çš„æ—¥å¿—è¾“å‡º







### ðŸ”§ æŠ€æœ¯æ”¹è¿›







#### Cloudflare Worker æ”¯æŒ



- åœ¨ `wrangler.toml` ä¸­æ·»åŠ äº† `GEMINI_API_BASE_URL` å’Œ `GEMINI_API_FALLBACK_URLS` é…ç½®



- ä¿®æ”¹äº† `src/api_proxy/worker.mjs` ä»¥æ”¯æŒå¯é…ç½®çš„åŸºç¡€URL



- å®žçŽ°äº†å¸¦é‡è¯•æœºåˆ¶çš„ `fetchWithFallback` å‡½æ•°



- æ›´æ–°äº† WebSocket å¤„ç†é€»è¾‘ä»¥æ”¯æŒæ•…éšœè½¬ç§»







#### Deno æ”¯æŒ



- ä¿®æ”¹äº† `src/deno_index.ts` ä»¥æ”¯æŒçŽ¯å¢ƒå˜é‡é…ç½®



- å®žçŽ°äº†ä¸Ž Cloudflare Worker ç›¸åŒçš„æ•…éšœè½¬ç§»æœºåˆ¶



- æ·»åŠ äº†çŽ¯å¢ƒå˜é‡è¯»å–å’Œå¤„ç†é€»è¾‘







#### æ ¸å¿ƒåŠŸèƒ½



- **HTTP APIä»£ç†**: æ”¯æŒ `/chat/completions`, `/embeddings`, `/models` ç«¯ç‚¹çš„æ•…éšœè½¬ç§»



- **WebSocketä»£ç†**: æ”¯æŒå®žæ—¶é€šä¿¡çš„æ•…éšœè½¬ç§»æœºåˆ¶



- **è¶…æ—¶å¤„ç†**: WebSocketè¿žæŽ¥è®¾ç½®10ç§’è¶…æ—¶



- **é”™è¯¯å¤„ç†**: æ”¹è¿›äº†é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€ç å¤„ç†







### ðŸ“ æ–°å¢žæ–‡ä»¶







- `NETWORK_CONFIG.md`: è¯¦ç»†çš„ç½‘ç»œé…ç½®æŒ‡å—



- `USAGE_EXAMPLES.md`: ä½¿ç”¨ç¤ºä¾‹å’Œæ•…éšœæŽ’é™¤æŒ‡å—



- `test/network-test.js`: ç½‘ç»œè¿žæŽ¥æµ‹è¯•è„šæœ¬



- `CHANGELOG.md`: æ›´æ–°æ—¥å¿—







### ðŸ”„ ä¿®æ”¹çš„æ–‡ä»¶







- `wrangler.toml`: æ·»åŠ äº†ç½‘ç»œé…ç½®å˜é‡



- `src/index.js`: æ›´æ–°äº†WebSocketå’ŒAPIå¤„ç†é€»è¾‘



- `src/api_proxy/worker.mjs`: æ·»åŠ äº†æ•…éšœè½¬ç§»æœºåˆ¶



- `src/deno_index.ts`: æ·»åŠ äº†çŽ¯å¢ƒå˜é‡æ”¯æŒ



- `package.json`: æ·»åŠ äº†ç½‘ç»œæµ‹è¯•è„šæœ¬



- `deno.json`: æ·»åŠ äº†ç½‘ç»œæµ‹è¯•ä»»åŠ¡



- `README.MD`: æ›´æ–°äº†éƒ¨ç½²è¯´æ˜Žå’Œç½‘ç»œé…ç½®ä¿¡æ¯







### ðŸŒ çŽ¯å¢ƒå˜é‡







#### GEMINI_API_BASE_URL



- **ä½œç”¨**: è®¾ç½®ä¸»è¦çš„Gemini APIåŸºç¡€URL



- **é»˜è®¤å€¼**: `https://generativelanguage.googleapis.com`



- **ç¤ºä¾‹**: `https://your-proxy-domain.com`







#### GEMINI_API_FALLBACK_URLS



- **ä½œç”¨**: è®¾ç½®å¤‡ç”¨APIç«¯ç‚¹åˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”



- **é»˜è®¤å€¼**: `https://generativelanguage.googleapis.com`



- **ç¤ºä¾‹**: `https://backup1.com,https://backup2.com,https://generativelanguage.googleapis.com`







### ðŸ“‹ ä½¿ç”¨æ–¹æ³•







#### Cloudflare Worker



```toml



[vars]



GEMINI_API_BASE_URL = "https://your-proxy-domain.com"



GEMINI_API_FALLBACK_URLS = "https://backup1.com,https://backup2.com"



```







#### Deno



```bash



export GEMINI_API_BASE_URL="https://your-proxy-domain.com"



export GEMINI_API_FALLBACK_URLS="https://backup1.com,https://backup2.com"



```







#### ç½‘ç»œæµ‹è¯•



```bash



# Node.js



npm run test:network







# Deno



deno task test:network



```







### ðŸ› é—®é¢˜ä¿®å¤







- è§£å†³äº†ä¸­å›½å¤§é™†åœ°åŒºæ— æ³•ç›´æŽ¥è®¿é—® `generativelanguage.googleapis.com` çš„é—®é¢˜



- æ”¹è¿›äº†ç½‘ç»œè¿žæŽ¥çš„ç¨³å®šæ€§å’Œå¯é æ€§



- ä¼˜åŒ–äº†é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ







### ðŸ’¡ ä½¿ç”¨å»ºè®®







1. **ä¿ç•™å®˜æ–¹åŸŸå**: åœ¨å¤‡ç”¨URLåˆ—è¡¨ä¸­ä¿ç•™å®˜æ–¹åŸŸåä½œä¸ºæœ€åŽé€‰é¡¹



2. **å¤šä¸ªå¤‡ç”¨åŸŸå**: é…ç½®å¤šä¸ªå¯é çš„ä»£ç†åŸŸåæé«˜å¯ç”¨æ€§



3. **å®šæœŸæµ‹è¯•**: ä½¿ç”¨ç½‘ç»œæµ‹è¯•å·¥å…·å®šæœŸæ£€æŸ¥è¿žæŽ¥çŠ¶æ€



4. **ç›‘æŽ§æ—¥å¿—**: é€šè¿‡æ—¥å¿—ç›‘æŽ§ç½‘ç»œè¿žæŽ¥çŠ¶æ€







### ðŸ”® æœªæ¥è®¡åˆ’







- æ·»åŠ æ›´å¤šçš„ç½‘ç»œä¼˜åŒ–é€‰é¡¹



- æ”¯æŒè‡ªå®šä¹‰è¶…æ—¶æ—¶é—´é…ç½®



- æ·»åŠ è¿žæŽ¥è´¨é‡ç›‘æŽ§



- å®žçŽ°æ™ºèƒ½è·¯ç”±é€‰æ‹©



=======
# æ›´æ–°æ—¥å¿—



## [2025-01-16] ç½‘ç»œè®¿é—®ä¼˜åŒ–æ›´æ–°



### ðŸš€ æ–°åŠŸèƒ½



- **å¯é…ç½®APIç«¯ç‚¹**: æ”¯æŒé€šè¿‡çŽ¯å¢ƒå˜é‡è‡ªå®šä¹‰Gemini APIåŸºç¡€URL

- **è‡ªåŠ¨æ•…éšœè½¬ç§»**: ä¸»URLå¤±è´¥æ—¶è‡ªåŠ¨å°è¯•å¤‡ç”¨URLåˆ—è¡¨

- **ç½‘ç»œè¿žæŽ¥æµ‹è¯•**: æ·»åŠ äº†ç½‘ç»œè¿žæŽ¥æµ‹è¯•å·¥å…·

- **è¯¦ç»†æ—¥å¿—è®°å½•**: æ”¹è¿›äº†è¿žæŽ¥è¿‡ç¨‹çš„æ—¥å¿—è¾“å‡º



### ðŸ”§ æŠ€æœ¯æ”¹è¿›



#### Cloudflare Worker æ”¯æŒ

- åœ¨ `wrangler.toml` ä¸­æ·»åŠ äº† `GEMINI_API_BASE_URL` å’Œ `GEMINI_API_FALLBACK_URLS` é…ç½®

- ä¿®æ”¹äº† `src/api_proxy/worker.mjs` ä»¥æ”¯æŒå¯é…ç½®çš„åŸºç¡€URL

- å®žçŽ°äº†å¸¦é‡è¯•æœºåˆ¶çš„ `fetchWithFallback` å‡½æ•°

- æ›´æ–°äº† WebSocket å¤„ç†é€»è¾‘ä»¥æ”¯æŒæ•…éšœè½¬ç§»



#### Deno æ”¯æŒ

- ä¿®æ”¹äº† `src/deno_index.ts` ä»¥æ”¯æŒçŽ¯å¢ƒå˜é‡é…ç½®

- å®žçŽ°äº†ä¸Ž Cloudflare Worker ç›¸åŒçš„æ•…éšœè½¬ç§»æœºåˆ¶

- æ·»åŠ äº†çŽ¯å¢ƒå˜é‡è¯»å–å’Œå¤„ç†é€»è¾‘



#### æ ¸å¿ƒåŠŸèƒ½

- **HTTP APIä»£ç†**: æ”¯æŒ `/chat/completions`, `/embeddings`, `/models` ç«¯ç‚¹çš„æ•…éšœè½¬ç§»

- **WebSocketä»£ç†**: æ”¯æŒå®žæ—¶é€šä¿¡çš„æ•…éšœè½¬ç§»æœºåˆ¶

- **è¶…æ—¶å¤„ç†**: WebSocketè¿žæŽ¥è®¾ç½®10ç§’è¶…æ—¶

- **é”™è¯¯å¤„ç†**: æ”¹è¿›äº†é”™è¯¯ä¿¡æ¯å’ŒçŠ¶æ€ç å¤„ç†



### ðŸ“ æ–°å¢žæ–‡ä»¶



- `NETWORK_CONFIG.md`: è¯¦ç»†çš„ç½‘ç»œé…ç½®æŒ‡å—

- `USAGE_EXAMPLES.md`: ä½¿ç”¨ç¤ºä¾‹å’Œæ•…éšœæŽ’é™¤æŒ‡å—

- `test/network-test.js`: ç½‘ç»œè¿žæŽ¥æµ‹è¯•è„šæœ¬

- `CHANGELOG.md`: æ›´æ–°æ—¥å¿—



### ðŸ”„ ä¿®æ”¹çš„æ–‡ä»¶



- `wrangler.toml`: æ·»åŠ äº†ç½‘ç»œé…ç½®å˜é‡

- `src/index.js`: æ›´æ–°äº†WebSocketå’ŒAPIå¤„ç†é€»è¾‘

- `src/api_proxy/worker.mjs`: æ·»åŠ äº†æ•…éšœè½¬ç§»æœºåˆ¶

- `src/deno_index.ts`: æ·»åŠ äº†çŽ¯å¢ƒå˜é‡æ”¯æŒ

- `package.json`: æ·»åŠ äº†ç½‘ç»œæµ‹è¯•è„šæœ¬

- `deno.json`: æ·»åŠ äº†ç½‘ç»œæµ‹è¯•ä»»åŠ¡

- `README.MD`: æ›´æ–°äº†éƒ¨ç½²è¯´æ˜Žå’Œç½‘ç»œé…ç½®ä¿¡æ¯



### ðŸŒ çŽ¯å¢ƒå˜é‡



#### GEMINI_API_BASE_URL

- **ä½œç”¨**: è®¾ç½®ä¸»è¦çš„Gemini APIåŸºç¡€URL

- **é»˜è®¤å€¼**: `https://generativelanguage.googleapis.com`

- **ç¤ºä¾‹**: `https://your-proxy-domain.com`



#### GEMINI_API_FALLBACK_URLS

- **ä½œç”¨**: è®¾ç½®å¤‡ç”¨APIç«¯ç‚¹åˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”

- **é»˜è®¤å€¼**: `https://generativelanguage.googleapis.com`

- **ç¤ºä¾‹**: `https://backup1.com,https://backup2.com,https://generativelanguage.googleapis.com`



### ðŸ“‹ ä½¿ç”¨æ–¹æ³•



#### Cloudflare Worker

```toml

[vars]

GEMINI_API_BASE_URL = "https://your-proxy-domain.com"

GEMINI_API_FALLBACK_URLS = "https://backup1.com,https://backup2.com"

```



#### Deno

```bash

export GEMINI_API_BASE_URL="https://your-proxy-domain.com"

export GEMINI_API_FALLBACK_URLS="https://backup1.com,https://backup2.com"

```



#### ç½‘ç»œæµ‹è¯•

```bash

# Node.js

npm run test:network



# Deno

deno task test:network

```



### ðŸ› é—®é¢˜ä¿®å¤



- è§£å†³äº†ä¸­å›½å¤§é™†åœ°åŒºæ— æ³•ç›´æŽ¥è®¿é—® `generativelanguage.googleapis.com` çš„é—®é¢˜

- æ”¹è¿›äº†ç½‘ç»œè¿žæŽ¥çš„ç¨³å®šæ€§å’Œå¯é æ€§

- ä¼˜åŒ–äº†é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ



### ðŸ’¡ ä½¿ç”¨å»ºè®®



1. **ä¿ç•™å®˜æ–¹åŸŸå**: åœ¨å¤‡ç”¨URLåˆ—è¡¨ä¸­ä¿ç•™å®˜æ–¹åŸŸåä½œä¸ºæœ€åŽé€‰é¡¹

2. **å¤šä¸ªå¤‡ç”¨åŸŸå**: é…ç½®å¤šä¸ªå¯é çš„ä»£ç†åŸŸåæé«˜å¯ç”¨æ€§

3. **å®šæœŸæµ‹è¯•**: ä½¿ç”¨ç½‘ç»œæµ‹è¯•å·¥å…·å®šæœŸæ£€æŸ¥è¿žæŽ¥çŠ¶æ€

4. **ç›‘æŽ§æ—¥å¿—**: é€šè¿‡æ—¥å¿—ç›‘æŽ§ç½‘ç»œè¿žæŽ¥çŠ¶æ€



### ðŸ”® æœªæ¥è®¡åˆ’



- æ·»åŠ æ›´å¤šçš„ç½‘ç»œä¼˜åŒ–é€‰é¡¹

- æ”¯æŒè‡ªå®šä¹‰è¶…æ—¶æ—¶é—´é…ç½®

- æ·»åŠ è¿žæŽ¥è´¨é‡ç›‘æŽ§

- å®žçŽ°æ™ºèƒ½è·¯ç”±é€‰æ‹©

>>>>>>>
