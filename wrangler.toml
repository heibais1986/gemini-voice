<<<<<<<
#:schema node_modules/wrangler/config-schema.json

=======
#:schema node_modules/wrangler/config-schema.json

name = "gemini-playground"

main = "src/index.js"

compatibility_date = "2024-12-30"

compatibility_flags = ["nodejs_compat"]



# é™æ€èµ„æºé…ç½®

# å°† src/static ç›®å½•ä¸‹çš„æ–‡ä»¶ä½œä¸ºé™æ€èµ„æºæä¾›æœåŠ¡

assets = { directory = "./src/static" }

>>>>>>>


<<<<<<<
name = "gemini-playground"

=======
# =============================================================================

# ç›‘æŽ§å’Œæ—¥å¿—é…ç½®

# =============================================================================

# Workers Logs - å¯ç”¨æ—¥å¿—è®°å½•ï¼Œä¾¿äºŽè°ƒè¯•å’Œç›‘æŽ§

# æ–‡æ¡£: https://developers.cloudflare.com/workers/observability/logs/workers-logs/

[observability]

enabled = true

>>>>>>>


<<<<<<<
main = "src/index.js"

=======
# =============================================================================

# æ™ºèƒ½æ”¾ç½®é…ç½®ï¼ˆå¯é€‰ï¼‰

# =============================================================================

# è‡ªåŠ¨å°†å·¥ä½œè´Ÿè½½æ”¾ç½®åœ¨æœ€ä½³ä½ç½®ä»¥æœ€å°åŒ–å»¶è¿Ÿ

# å¯¹äºŽåŽç«¯é€»è¾‘ï¼Œæ”¾ç½®åœ¨é è¿‘åŽç«¯åŸºç¡€è®¾æ–½è€Œéžæœ€ç»ˆç”¨æˆ·çš„ä½ç½®å¯èƒ½ä¼šæœ‰æ›´å¥½çš„æ€§èƒ½

# æ–‡æ¡£: https://developers.cloudflare.com/workers/configuration/smart-placement/#smart-placement

# [placement]

# mode = "smart"

>>>>>>>


<<<<<<<
compatibility_date = "2024-12-30"

=======
# =============================================================================

# çŽ¯å¢ƒå˜é‡é…ç½®

# =============================================================================

# å˜é‡ç»‘å®šï¼šè¿™äº›æ˜¯ä»»æ„çš„çº¯æ–‡æœ¬å­—ç¬¦ä¸²ï¼ˆç±»ä¼¼äºŽçŽ¯å¢ƒå˜é‡ï¼‰

# æ–‡æ¡£: https://developers.cloudflare.com/workers/wrangler/configuration/#environment-variables

# æ³¨æ„ï¼šæ•æ„Ÿæ•°æ®è¯·ä½¿ç”¨ Secrets å­˜å‚¨

# æ–‡æ¡£: https://developers.cloudflare.com/workers/configuration/secrets/

[vars]

# =============================================================================

# ç½‘ç»œé…ç½® - è§£å†³ä¸­å›½å¤§é™†è®¿é—®é™åˆ¶é—®é¢˜

# =============================================================================

# å¯é…ç½®çš„Gemini APIåŸºç¡€URLï¼Œé»˜è®¤ä½¿ç”¨å®˜æ–¹åŸŸå

# å¦‚æžœæ— æ³•è®¿é—®å¯ä»¥è®¾ç½®ä¸ºä»£ç†åŸŸå

GEMINI_API_BASE_URL = "https://generativelanguage.googleapis.com"

>>>>>>>


<<<<<<<
compatibility_flags = ["nodejs_compat"]

=======
# å¤‡ç”¨åŸŸååˆ—è¡¨ï¼Œå½“ä¸»åŸŸåæ— æ³•è®¿é—®æ—¶è‡ªåŠ¨å°è¯•

# å¤šä¸ªåŸŸåç”¨é€—å·åˆ†éš”ï¼Œæ”¯æŒæ•…éšœè½¬ç§»

GEMINI_API_FALLBACK_URLS = "https://generativelanguage.googleapis.com"



# =============================================================================

# ç”¨æˆ·ç³»ç»Ÿé…ç½® - éžæ•æ„Ÿçš„å…¬å¼€ä¿¡æ¯

# =============================================================================

# å¾®ä¿¡åº”ç”¨IDï¼ˆå…¬å¼€ä¿¡æ¯ï¼Œå¯ä»¥æš´éœ²åœ¨å‰ç«¯ï¼‰

WECHAT_APP_ID = "your-wechat-app-id"



# æ”¯ä»˜å®åº”ç”¨IDï¼ˆå…¬å¼€ä¿¡æ¯ï¼Œå¯ä»¥æš´éœ²åœ¨å‰ç«¯ï¼‰

ALIPAY_APP_ID = "your-alipay-app-id"



# å¾®ä¿¡æ”¯ä»˜å•†æˆ·å·ï¼ˆå…¬å¼€ä¿¡æ¯ï¼Œå¯ä»¥æš´éœ²åœ¨å‰ç«¯ï¼‰

WECHAT_PAY_MCH_ID = "your-wechat-pay-mch-id"



# ç³»ç»Ÿé…ç½®

APP_NAME = "Gemini Playground"

APP_VERSION = "2.0.0"

ENVIRONMENT = "production"



# APIé™åˆ¶é…ç½®

MAX_DAILY_API_CALLS_FREE = "100"      # å…è´¹ç”¨æˆ·æ¯æ—¥APIè°ƒç”¨é™åˆ¶

MAX_DAILY_API_CALLS_PREMIUM = "10000" # ä»˜è´¹ç”¨æˆ·æ¯æ—¥APIè°ƒç”¨é™åˆ¶



# æ”¯ä»˜é…ç½®

PREMIUM_PRICE = "20.00"               # å¹´è´¹ä»·æ ¼ï¼ˆå…ƒï¼‰

PREMIUM_DURATION_DAYS = "365"         # å¹´è´¹æœ‰æ•ˆæœŸï¼ˆå¤©ï¼‰



# =============================================================================

# ðŸ” æ•æ„Ÿä¿¡æ¯å®‰å…¨æé†’

# =============================================================================

# âš ï¸ é‡è¦ï¼šä»¥ä¸‹æ•æ„Ÿä¿¡æ¯å·²ç§»è‡³ Cloudflare Secretsï¼Œä¸è¦åœ¨æ­¤æ–‡ä»¶ä¸­è®¾ç½®ï¼

#

# å¿…éœ€çš„å¯†é’¥ï¼ˆé€šè¿‡ wrangler secret put å‘½ä»¤è®¾ç½®ï¼‰ï¼š

# - SERVER_GEMINI_API_KEY: æœåŠ¡å™¨çš„Gemini API Keyï¼ˆä»˜è´¹ç”¨æˆ·ä½¿ç”¨ï¼‰

# - JWT_SECRET: JWTç­¾åå¯†é’¥ï¼ˆ64ä½éšæœºå­—ç¬¦ä¸²ï¼‰

# - ENCRYPTION_KEY: æ•°æ®åŠ å¯†å¯†é’¥ï¼ˆ32ä½éšæœºå­—ç¬¦ä¸²ï¼‰

#

# å¯é€‰çš„å¯†é’¥ï¼ˆæ ¹æ®åŠŸèƒ½éœ€è¦è®¾ç½®ï¼‰ï¼š

# - WECHAT_APP_SECRET: å¾®ä¿¡åº”ç”¨å¯†é’¥ï¼ˆå¾®ä¿¡ç™»å½•åŠŸèƒ½ï¼‰

# - ALIPAY_PRIVATE_KEY: æ”¯ä»˜å®åº”ç”¨ç§é’¥ï¼ˆæ”¯ä»˜å®æ”¯ä»˜åŠŸèƒ½ï¼‰

# - ALIPAY_PUBLIC_KEY: æ”¯ä»˜å®å…¬é’¥ï¼ˆæ”¯ä»˜å®æ”¯ä»˜åŠŸèƒ½ï¼‰

# - WECHAT_PAY_API_KEY: å¾®ä¿¡æ”¯ä»˜APIå¯†é’¥ï¼ˆå¾®ä¿¡æ”¯ä»˜åŠŸèƒ½ï¼‰

#

# è®¾ç½®æ–¹æ³•ï¼š

# 1. è‡ªåŠ¨åŒ–è„šæœ¬ï¼šnpm run setup-secrets

# 2. æ‰‹åŠ¨è®¾ç½®ï¼šwrangler secret put <SECRET_NAME>

# 3. æŸ¥çœ‹å·²è®¾ç½®çš„å¯†é’¥ï¼šwrangler secret list

#

# è¯¦ç»†è¯´æ˜Žè¯·å‚è€ƒï¼šSECRETS_MANAGEMENT.md



# Bind the Workers AI model catalog. Run machine learning models, powered by serverless GPUs, on Cloudflareâ€™s global network

# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#workers-ai

# [ai]

# binding = "AI"

>>>>>>>


assets = { directory = "./src/static" }







<<<<<<<
# Workers Logs

=======
# Bind a D1 database. D1 is Cloudflareâ€™s native serverless SQL database.

# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#d1-databases

[[d1_databases]]

binding = "DB"                                    # åœ¨ä»£ç ä¸­é€šè¿‡ env.DB è®¿é—®

database_name = "gemini-playground-db"            # æ•°æ®åº“åç§°

database_id = "your-database-id-here"            # âš ï¸ éœ€è¦åˆ›å»ºæ•°æ®åº“åŽæ›¿æ¢ä¸ºå®žé™…ID

>>>>>>>


<<<<<<<
# Docs: https://developers.cloudflare.com/workers/observability/logs/workers-logs/

=======
# æ•°æ®åº“æ“ä½œå‘½ä»¤ï¼š

# åˆ›å»ºæ•°æ®åº“ï¼šwrangler d1 create gemini-playground-db

# åˆå§‹åŒ–æ•°æ®åº“ï¼šwrangler d1 execute gemini-playground-db --file=database/init.sql

# æŸ¥çœ‹æ•°æ®åº“ï¼šwrangler d1 execute gemini-playground-db --command="SELECT COUNT(*) FROM users"



# Bind a dispatch namespace. Use Workers for Platforms to deploy serverless functions programmatically on behalf of your customers.

# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#dispatch-namespace-bindings-workers-for-platforms

# [[dispatch_namespaces]]

# binding = "MY_DISPATCHER"

# namespace = "my-namespace"

>>>>>>>


# Configuration: https://developers.cloudflare.com/workers/observability/logs/workers-logs/#enable-workers-logs



[observability]



enabled = true







# Automatically place your workloads in an optimal location to minimize latency.



# If you are running back-end logic in a Worker, running it closer to your back-end infrastructure



# rather than the end user may result in better performance.



# Docs: https://developers.cloudflare.com/workers/configuration/smart-placement/#smart-placement



# [placement]



<<<<<<<
# mode = "smart"







# Variable bindings. These are arbitrary, plaintext strings (similar to environment variables)



# Docs:



# - https://developers.cloudflare.com/workers/wrangler/configuration/#environment-variables



# Note: Use secrets to store sensitive data.



# - https://developers.cloudflare.com/workers/configuration/secrets/



# [vars]



# MY_VARIABLE = "production_value"







# Bind the Workers AI model catalog. Run machine learning models, powered by serverless GPUs, on Cloudflareâ€™s global network



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#workers-ai



# [ai]



# binding = "AI"







# Bind an Analytics Engine dataset. Use Analytics Engine to write analytics within your Pages Function.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#analytics-engine-datasets



# [[analytics_engine_datasets]]



# binding = "MY_DATASET"







# Bind a headless browser instance running on Cloudflare's global network.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#browser-rendering



# [browser]



# binding = "MY_BROWSER"







# Bind a D1 database. D1 is Cloudflareâ€™s native serverless SQL database.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#d1-databases



# [[d1_databases]]



# binding = "MY_DB"



# database_name = "my-database"



# database_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"







# Bind a dispatch namespace. Use Workers for Platforms to deploy serverless functions programmatically on behalf of your customers.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#dispatch-namespace-bindings-workers-for-platforms



# [[dispatch_namespaces]]



# binding = "MY_DISPATCHER"



# namespace = "my-namespace"







# Bind a Durable Object. Durable objects are a scale-to-zero compute primitive based on the actor model.



# Durable Objects can live for as long as needed. Use these when you need a long-running "server", such as in realtime apps.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#durable-objects



# [[durable_objects.bindings]]



# name = "MY_DURABLE_OBJECT"



# class_name = "MyDurableObject"







# Durable Object migrations.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#migrations



# [[migrations]]



# tag = "v1"



# new_classes = ["MyDurableObject"]







# Bind a Hyperdrive configuration. Use to accelerate access to your existing databases from Cloudflare Workers.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#hyperdrive



# [[hyperdrive]]



# binding = "MY_HYPERDRIVE"



# id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"







# Bind a KV Namespace. Use KV as persistent storage for small key-value pairs.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#kv-namespaces



# [[kv_namespaces]]



# binding = "MY_KV_NAMESPACE"



# id = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"







# Bind an mTLS certificate. Use to present a client certificate when communicating with another service.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#mtls-certificates



# [[mtls_certificates]]



# binding = "MY_CERTIFICATE"



# certificate_id = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"







# Bind a Queue producer. Use this binding to schedule an arbitrary task that may be processed later by a Queue consumer.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#queues



# [[queues.producers]]



# binding = "MY_QUEUE"



# queue = "my-queue"







# Bind a Queue consumer. Queue Consumers can retrieve tasks scheduled by Producers to act on them.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#queues



# [[queues.consumers]]



# queue = "my-queue"







# Bind an R2 Bucket. Use R2 to store arbitrarily large blobs of data, such as files.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#r2-buckets



# [[r2_buckets]]



# binding = "MY_BUCKET"



# bucket_name = "my-bucket"







# Bind another Worker service. Use this binding to call another Worker without network overhead.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#service-bindings



# [[services]]



# binding = "MY_SERVICE"



# service = "my-service"







# Bind a Vectorize index. Use to store and query vector embeddings for semantic search, classification and other vector search use-cases.



# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#vectorize-indexes



# [[vectorize]]



# binding = "MY_INDEX"



# index_name = "my-index"



=======
# Bind a Vectorize index. Use to store and query vector embeddings for semantic search, classification and other vector search use-cases.

# Docs: https://developers.cloudflare.com/workers/wrangler/configuration/#vectorize-indexes

# [[vectorize]]

# binding = "MY_INDEX"

# index_name = "my-index"



# =============================================================================

# éƒ¨ç½²è¯´æ˜Žå’Œå¿«é€Ÿå¼€å§‹

# =============================================================================

#

# ðŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤ï¼š

#

# 1. åˆ›å»ºæ•°æ®åº“ï¼š

#    wrangler d1 create gemini-playground-db

#    ç„¶åŽå°†è¿”å›žçš„ database_id æ›´æ–°åˆ°ä¸Šé¢çš„ [[d1_databases]] é…ç½®ä¸­

#

# 2. åˆå§‹åŒ–æ•°æ®åº“ï¼š

#    wrangler d1 execute gemini-playground-db --file=database/init.sql

#

# 3. è®¾ç½®å¯†é’¥ï¼ˆé€‰æ‹©ä¸€ç§æ–¹å¼ï¼‰ï¼š

#    æ–¹å¼A: npm run setup-secretsï¼ˆæŽ¨èï¼‰

#    æ–¹å¼B: æ‰‹åŠ¨è®¾ç½®

#      wrangler secret put SERVER_GEMINI_API_KEY

#      wrangler secret put JWT_SECRET

#      wrangler secret put ENCRYPTION_KEY

#

# 4. éƒ¨ç½²åº”ç”¨ï¼š

#    wrangler deploy

#

# ðŸ“š ç›¸å…³æ–‡æ¡£ï¼š

# - å¿«é€Ÿéƒ¨ç½²æŒ‡å—: QUICK_DEPLOY.md

# - å¯†é’¥ç®¡ç†æŒ‡å—: SECRETS_MANAGEMENT.md

# - å®Œæ•´éƒ¨ç½²æŒ‡å—: USER_SYSTEM_DEPLOYMENT.md

# - ç½‘ç»œé…ç½®æŒ‡å—: NETWORK_CONFIG.md

#

# ðŸ”§ å¸¸ç”¨å‘½ä»¤ï¼š

# - æœ¬åœ°å¼€å‘: wrangler dev

# - æŸ¥çœ‹æ—¥å¿—: wrangler tail

# - æŸ¥çœ‹å¯†é’¥: wrangler secret list

# - æŸ¥çœ‹æ•°æ®åº“: wrangler d1 execute gemini-playground-db --command="SELECT COUNT(*) FROM users"

#

# ðŸ” å®‰å…¨æé†’ï¼š

# - ä¸è¦åœ¨æ­¤æ–‡ä»¶ä¸­å­˜å‚¨æ•æ„Ÿä¿¡æ¯

# - ä½¿ç”¨ Cloudflare Secrets ç®¡ç†å¯†é’¥

# - å®šæœŸè½®æ¢å¯†é’¥

# - ç›‘æŽ§è®¿é—®æ—¥å¿—

>>>>>>>
